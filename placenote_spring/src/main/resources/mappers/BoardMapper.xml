<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.springboot.placenote.domain.board.BoardRepository">
	<select id="create_key">
		
	</select>
	<insert id="insertBoard"
		parameterType="com.springboot.placenote.domain.board.Board">
		<selectKey keyProperty="board_id" resultType="Integer" order="BEFORE">
			select
				ifnull(max(board_id), 0) + 1
			from
				board_mst;
		</selectKey>
		INSERT INTO
		board_mst
		VALUES(
		#{board_id},
		#{writer},
		#{keyword},
		#{place_name},
		#{location},
		#{board_content},
		NOW(),
		NOW()
		);
		
		INSERT INTO
		board_file
		VALUES
		<foreach collection="file_name" item="file_name" separator=",">
			(
			0,
			#{board_id},
			#{file_name}
			)
		</foreach>
		;
	</insert>
</mapper>